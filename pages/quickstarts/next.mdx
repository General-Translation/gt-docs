import { Callout } from 'nextra/components'

# Next.js Quickstart 

This guide describes how to add `gt-react` to a [Next.js](https://nextjs.org) project which is using the [App Router](https://nextjs.org/docs#app-router-vs-pages-router).

### Set up your account

First, sign in to the General Translation [Dashboard](https://www.generaltranslation.com/dashboard) using an existing Google or GitHub account. 

Next, [create](https://www.generaltranslation.com/dashboard/redirect/api-keys) an API key. This is a 36-character string beginning `gtx-` which is used to authenticate your app with our cloud translation service.
Keep your API key safe and secret.

### Set up your local environment

Navigate to your existing Next.js app, or follow the instructions [here](https://nextjs.org/docs/getting-started/installation) to create a new one.

In your local environment, usually `.env.local`, set two environment variables:

```.env copy
GT_API_KEY=""
GT_PROJECT_ID=""
```

- For `GT_API_KEY`, use the API key you created earlier.
- For `GT_PROJECT_ID`, use the `projectID` found on the Dashboard.

![Code copy container entitled "projectID"](/screenshots/project_id.jpeg)

### Install the library

To install `gt-react`, open your project and run: 

```txt copy
npm i gt-react
```

### `i18n.js`

In the root directory of your project, or `src/` if you are using a `src` directory, create a file called `i18n.js`, or `i18n.ts` if you are using TypeScript.

```
my-app/
├── src/
│   ├── app/
│   │    └── page.js
│   ├── components/
│   │   ├── Header.js
│   │   └── Footer.js
│   └── i18n.js
├── public/
│   └── favicon.ico
├── .gitignore
├── package.json
└── README.md
```

`i18n.js` is a central config file for `gt-react` components. **`t()` and other server-side `gt-react` functions are exported from it**, not from the library directly. 

<Callout type="info">
You can name the config file whatever you want and place it wherever you like. Calling it `i18n.js` is just a convention.
</Callout>

The file should look like:

```js copy
import { createGT } from 'gt-react/next';

export const { T, GTProvider } = createGT({
    defaultLocale: 'en-US' // the language of your app
    dictionary: {
        /* your dictionary here */
    }
});
```

## Dictionaries

Keeping translatable content in a single `.json` or `.js` file is a common technique in web app development.
Using a single dictionary allows for easier management of translations and ensures consistency across the application.

**Uniquely, `gt-react` dictionaries don't just support strings**. You can write content in JSX too!
This means you can usually copy and paste your components directly into your dictionaries.

A simple dictionary could look something like:

```js copy
// dictionary.js

const dictionary = {
    "landing": {
        "hero": <h1>Welcome to our site!</h1>,
        "get_started_button": (
            <a href='/signin'><button>Get Started</button></a>
        )
    },
    "client_component" {
        "greeting": <>Hello, world. This content is rendered in a client component.</>
    }
}

export default dictionary;
```

## Server-side i18n

In the Next.js App Router, components are Server Components by default.

Translated dictionary entries can be used in server components with the `t()` function.

```js copy
// i18n.js 

import { createGT } from 'gt-react/next';
import dictionary from './dictionary.js'
 
export const { t } = createGT({
    defaultLocale: 'en-US',
    dictionary: dictionary
});
```

```js copy
// page.js 

import { t } from '@i18n'

export default function Page() {
    return (
        <main>
            {t('landing.hero')}
        </main>
    )
}
```

Read more about dictionaries [here](/config/dictionaries).

### Client-side i18n

Components which use client-side JavaScript, like React [hooks](https://react.dev/reference/react/hooks), are client components. 
Since all translation in the `gt-react` stack happens on the server, content must be translated before being passed to the client for translation to work.

Use `<GTProvider>` to pass translations from the server to the client.

```javascript copy
import { GTProvider } from '@i18n'
```

`<GTProvider>` provides a dictionary of translations to the client using React's [Context](https://react.dev/learn/passing-data-deeply-with-context) API. 
These translations can then be accessed with the client-side `useGT()` hook.

<Callout type="info">
`useGT()` is equivalent to the `useTranslations()` hook in other i18n libraries.
</Callout>

```javascript copy
import { GTProvider } from '@i18n' // remember this can only be imported in server components

import ClientComponent from './ClientComponent.js'

export default function Page() {
    return (
        <GTProvider dictionary={{
            "welcome": {
                "prompt": <>Click here to change the text!</>,
                "hello": <>Hello, world! This is a fragment.</>,
                "goodbye": (
                    <p>
                        <b>Goodbye, world!</b> 
                        This is a paragraph with a bold tag.
                    </p>
                )
            }
        }}>
            <ClientComponent />
        </GTProvider>
    )
}
```

```javascript copy
// ClientComponent.js
// Displays a button which changes the state every time it is pressed.
// If currentState is true, displays a greeting. Otherwise displays a goodbye.

'use client'

import { useGT } from 'gt-react/client' // client-side library
import { useState } from 'react'

export default function ClientComponent() {

    // Specifying a part of the dictionary here for cleaner ids in the t function
    const t = useGT('welcome') 

    const [currentState, setCurrentState] = useState(true)

    return (
        <div>
            <button onClick={() => {setCurrentState(prev => !prev)}}>
                {t('prompt')}
            </button>
            {
                currentState
                ?
                t('hello')
                :
                t('goodbye')
            }
        </div>
    )
}
```

### Using variables

Sometimes you need to include a variable in your content. For example, imagine you are displaying a welcome page and you want to address your user by their first name:

```js copy
TBD
```

To translate a phrase involving a variable, use the [`<Var>`](/essentials#variables) component of `gt-react`:

```js copy
TBD
```

```js copy
TBD
```

The children of the `<Var>` component will remain untranslated and can change without forcing a retranslation.
Anything you include as the children of the `<Var>` in the dictionary will be the default value, rendered if no value is supplied in the `t()` function. 

<Callout>
    Use the `name` prop to specify the name of the variable, then assign a value to that name like `t('id', { [your_variable_name]: your_value })
</Callout>

In addition to `<Var>`, there are the specialized variable types [`<Num>`](/essentials#num) for numbers, [`<DateTime>`](/essentials#datetime) for dates, and [`<Currency>`](/essentials#currency) for currencies.

### Plurals

Imagine you wanted to translate a phrase with a number that could be singular or plural, like:

```js copy
TBD
```
```js copy
TBD
```

You could use the `<Var>` component, or better yet, the `<Num>` component, to render the number without forcing a new translation for each different value of `n`.

```js copy
TBD
```

But sometimes the translation needs to change depending on the value of the number. For example, "You have 1 new *message*", but "You have 2 new *messages*". 
In this case, try using the `<Plural>` component to translate. `<Plural>` is a special form of `<T>` that takes a number `n` as a prop. Depending on the value of `n` and your user's current locale, it selectively renders a singular or plural form.

```js copy
TBD
```

Learn more about plurals [here](/essentials#plurals).

<Callout>
    Some languages, like Arabic, have a *dual*, a special plural form for when there are exactly two of something.
    The `<Plural>` server component handles these scenarios by gracefully generating localized plurals.
</Callout>

### Next steps

- Use the [AI reference sheet](/ai-guide) to ask your favorite AI model to set up the `gt-react` library.