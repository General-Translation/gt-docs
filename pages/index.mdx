import { Callout } from 'nextra/components'

# General Translation

Welcome to the docs for [General Translation](https://www.generaltranslation.com).

Our products:

- `gt-react`, an internationalization ("i18n") library for [React](https://react.dev) and [Next.js](https://nextjs.org) applications.

Unlike other i18n stacks, `gt-react`:

- **Translates automatically and on-demand** â€” once connected to our cloud service, your app will instantly support dozens of languages, no extra work needed.
- **Translates entire React components, not just strings.** So there's no need to rewrite your site to accomodate new languages.
- **Works across both client and server components**, with first-class support for Next.js App Router and React Server Components.

## `gt-react` Quickstart 

This guide describes how to add `gt-react` to a [Next.js](https://nextjs.org) project which is using the [App Router](https://nextjs.org/docs#app-router-vs-pages-router). See quickstarts for other frameworks [here](/guides).

### Set up your account

First, sign in to the General Translation [Dashboard](https://www.generaltranslation.com/dashboard) using an existing Google or GitHub account. 

Next, [create](https://www.generaltranslation.com/dashboard/redirect/api-keys) an API key. This is a 36-character string beginning `gtx-` which is used to authenticate your app with our cloud translation service.
Keep your API key safe and secret.

### Set up your local environment

Navigate to your existing Next.js app, or follow the instructions [here](https://nextjs.org/docs/getting-started/installation) to create a new one.

In your local environment, usually `.env.local`, set two environment variables:

```.env copy
GT_API_KEY=""
GT_PROJECT_ID=""
```

- For `GT_API_KEY`, use the API key you created earlier.
- For `GT_PROJECT_ID`, use the `projectID` found on the Dashboard.

![Code copy container entitled "projectID"](/screenshots/project_id.jpeg)

### Install the library

To install `gt-react`, open your project and run: 

``` copy
npm i gt-react
```

### `i18n.js`

In the root directory of your project, or `src/` if you are using a `src` directory, create a file called `i18n.js`, or `i18n.ts` if you are using TypeScript.

```js copy
import { createGT } from 'gt-react/next';

export const { T, GTProvider } = createGT({
    defaultLocale: 'en-US' // the language of your app
});
```

Proceed with support for all languages, or use this [page](https://www.generaltranslation.com/dashboard/redirect/welcome) to select common configuration options.

`i18n.js` is a central config file for `gt-react` components. **`<T>` and other server-side `gt-react` functions are exported from it**, not from the library directly.

<Callout type="info">
You can name the config file whatever you want and place it wherever you like. Calling it `i18n.js` is just a convention.
</Callout>

### Server-side i18n

In the Next.js App Router, components are Server Components by default. The best way to internationalize these components is with `<T>`:

```js copy
import { T } from '@i18n'
```

When imported from `i18n.js`, `<T>` is a server-only component that surrounds any text or tags you'd like to be internationalized. 
Best practice is to pass a unique id prop to each `<T>` component. 

For example:

```js copy
import Link from 'next/link'
import { T } from '@i18n'

export default function Page() {
    return (
        <T id='landing'>
            <h1>Welcome to my site!</h1>
            <ul>
                <li>This site contains nested tags.</li>
                <li>Some tags are <b>bold</b>, some are <i>italicized</i>.</li>
                <li>There can be <span className="text-green">tags within tags within</span> tags.</li>
                <li>On <Link href="/">this page</Link>, simple children of any type of tag will still be translated.</li>
            </ul>
        </T>
    )
}
```

**That's it! The page is ready to go in dozens of languages.**

### Client-side i18n

Components which use client-side JavaScript, like React [hooks](https://react.dev/reference/react/hooks), are client components. Since all translation in the `gt-react` stack happens on the server, translated text must be passed to the client for translation to work.

The simplest way to do this is with an `<T>` component, like:

```javascript copy
import { T } from '@i18n'
import ClientSideButton from './ClientSideButton.js' // a client component

export default function Page() {
    return (
        <T id='button'>
            <main>
                <h1>Welcome to my site!</h1>
                <ClientSideButton>Get Started!</ClientSideButton>
            </main>
        </T>
    )
}
```

However, sometimes it is difficult to pass children directly from server to client, for example if the client component is displayed conditionally, or is nested within another client component.
In this case, it is recommended to use `<GTProvider>`.

```javascript copy
import { GTProvider } from '@i18n'
```

`<GTProvider>` provides translations to the client using React's [Context](https://react.dev/learn/passing-data-deeply-with-context) API. 
These translations can then be accessed with `useGT()`.

<Callout type="info">
`useGT()` is equivalent to the `useTranslations()` hook in other i18n libraries.
</Callout>

```javascript copy
import { GTProvider } from '@i18n' // remember @i18n can only be imported in server components

import ClientComponent from './ClientComponent.js'

export default function Page() {
    return (
        <GTProvider dictionary={{
            "welcome": {
                "prompt": <>Click here to change the text!</>,
                "hello": <>Hello, world! This is a fragment.</>,
                "goodbye": (
                    <p>
                        <b>Goodbye, world!</b> 
                        This is a paragraph with a bold tag.
                    </p>
                )
            }
        }}>
            <ClientComponent />
        </GTProvider>
    )
}
```

```javascript copy
// ClientComponent.js
// Displays a button which changes the state every time it is pressed.
// If currentState is true, displays a greeting. Otherwise displays a goodbye.

'use client'

import { useGT } from 'gt-react/client' // client-side library
import { useState } from 'react'

export default function ClientComponent() {

    const t = useGT()

    const [currentState, setCurrentState] = useState(true)

    return (
        <div>
            <button onClick={() => {setCurrentState(prev => !prev)}}>
                {t('welcome.prompt')}
            </button>
            {
                currentState
                ?
                t('welcome.hello')
                :
                t('welcome.goodbye')
            }
        </div>
    )
}
```

### How it works

Here's how it works when your default language is English:

- **For English-speaking users, nothing changes.** No data is ever sent to us and your site is rendered as normal.

- The first time a non-English language user visits your site, we use a cloud-based AI model to translate your content into their preferred browser language.

- The English version of your page is served to your user. When the translated content is ready, usually within a few seconds, it is rendered on the page, replacing the English content.

- This is known as the "replace" render method, but `gt-react` can also be [configured](/gt-react/config) to handle the initial translation delay differently. Other options include serving web pages with the text still loading, hanging the page while the translation loads, or rendering the translation only on the second page access.

- General Translation then caches your translations to serve to subsequent non-English-speaking users, who only ever receive the page in their chosen language. Data is stored globally, and usually available in fewer than 100ms.

- Whenever you update the children of the `<T>` component, it registers the new, uncached content. Translated content that is still valid is served, alongside the new content in English. Just like when the entire page needed to be translated, the new content replaces the English as soon as it's ready, and is cached for the next user.

### Next steps

- Use the [AI reference sheet](/ai-guide) to ask your favorite AI model to set up the `gt-react` library.

- Change how translated text is rendered, the default language, or which languages are approved for translation, by [configuring](/gt-react/config) it.

- Learn about the [parameters](/gt-react/server/t-component#props) of the `<T>` component, including `id` and `page`.

- Learn how to translate [Client Components](/gt-react/client) with `<GTProvider>`.

- Translate around private variables like `<Var>`, `<Num>`, `<Currency>`, and `<DateTime>`.

- Learn about translating [plural forms](/gt-react/server/numeric) with `<Numeric>` and [logic branches](/gt-react/server/value) with the `<Value>` component.