---
title: The CLI Tool
description: The General Translations CLI tool 
---

## Overview

This is a reference doc on the General Translation CLI tool.
For a step by step guide, check out the [Deploying to Production](/docs/next/tutorials/quickdeploy) guide.

### Installation

<Tabs items={["npm", "yarn", "bun", "pnpm"]}>
  <Tab value="npm">
  ```bash 
  npm i gt-next-cli --save-dev
  ``` 
  </Tab>
  <Tab value="yarn">
  ```bash 
  yarn add gt-next-cli --dev
  ```
  </Tab>
  <Tab value="bun">
  ```bash 
  bun add gt-next-cli --dev
  ```
  </Tab>
  <Tab value="pnpm">
  ```bash 
  pnpm add gt-next-cli --save-dev
  ```
  </Tab>
</Tabs>

## What does the CLI tool do?

The CLI tool is a script that will scan your entire app for content to be translated.
During this scan, it will parse and validate any `<T>` components or dictionaries that are used in your codebase.

After parsing and validating content, the CLI tool will save the corresponding hashes and content on our servers.
If eager translation is specified, the GT API will pre-translate the content in the specified locales and cache it on our CDN.

## What is eager translation? [#pre-translation]

Eager translation is the process of translating content in advance.
This way, when the user requests a page, the translated content is already available in the CDN and can be served immediately.

Of course, it is not always the best practice to translate every single language in advance.
You should consider the languages that are most commonly used by your audience and translate those.
The rest can be translated at runtime as necessary.


## Is this required?

Yes, you must run the CLI tool as part of your CI/CD pipeline in order to ensure that your content is able to be translated in production.

Due to the nature of React (and Next.js client components) being rendered on the client side, API Keys and similar credentials
cannot be passed to the client. The CLI tool is necessary to prevent abuse from malicious actors. 

Running the CLI tool allows GT to pre-authorize your content for translation via hashing, eliminating security vulnerabilities.


## Translating

To use the CLI tool, run the following command from the root of your project:

```bash title="shell" copy
npx gt-next-cli translate
```

<Callout type="warn">
    **For Production Use Only!**

    Because this CLI tool publishes translated content to the CDN, it is meant to only be used for production builds and **should not be used in development**.
    Before running this command, please make sure you are on the branch that will be used for production.
    Remember to also specify your production API key and Project ID in your environment variables.
</Callout>

### Flags


<TypeTable
  type={{
    "--api-key": {
        description:
            'Production API key',
        type: 'string',
        optional: true,
    },
    "--project-id": {
        description:
            'The project ID',
        type: 'string',
        optional: true,
    },
    "--options": {
        description:
            'Path to the GT options file',
        type: 'string',
        optional: true,
        default: 'gt.config.json',
    },
    "--new": {
        description:
            'New locales to translate your project into',
        type: 'string',
        optional: true,
    },
    "--dictionary": {
        description:
            'Path to the dictionary file',
        type: 'string',
        optional: true,
    },
    "--dry-run": {
        description:
            'Dry run the command',
        type: 'boolean',
        optional: true,
        default: 'false',
    },
    "--ignore-errors": {
        description:
            'Ignore errors and force translation for valid content',
        type: 'boolean',
        optional: true,
        default: 'false',
    },
    "--inline": {
        description:
            'Include inline <T> tags in addition to the dictionary',
        type: 'boolean',
        optional: true,
        default: 'true',
    },
  }}
/>

When running the CLI tool for the first time, it will attempt to create a `gt.config.json` file in the root of your project.
This file contains metadata about your project that is used to translate your content.

---

## Setup

Additionally, the CLI tool can automatically scan and setup your project for translation.
If you are using General Translation for the first time, we recommend running the setup to get started.

```bash title="shell" copy
npx gt-next-cli setup
```

<Callout type="warn">
    **Stash your changes!**

    This will modify your codebase, so make sure to either stash or commit your changes first.
</Callout>

Running this command will wrap `<T>` components around the top level of JSX elements which contain translatable content.

It will also wrap any non-static content with `<Var>` components. 

Here are some examples of what the scan will convert:


<Tabs items={["Example 1", "Example 2", "Example 3", "Example 4", "Example 5"]}>
  <Tab value="Example 1">


  ```jsx
  <div>Hello, World!</div>
  ```

  Will be converted to:

  ```jsx
  <T id="">Hello, World!</T>
  ```

  </Tab>
  <Tab value="Example 2">


  ```jsx
  <div>Hello, {name}</div>
  ```

  Will be converted to:

  ```jsx
  <T id="">Hello, <Var>{name}</Var></T>
  ```

  </Tab>
  <Tab value="Example 3">


  ```jsx
  <p>{true && "Hello, World!"}</p>;
  ```

  Will be converted to:

  ```jsx
  <T id=""><p><Var>{true && <T id="">{"Hello, World!"}</T>}</Var></p></T>;
  ```

  </Tab>
  <Tab value="Example 4">


  ```jsx
  <p>{"Hello," + " World!"}</p>
  ```

  Will be converted to:

  ```jsx
  <T id=""><p>{"Hello," + " World!"}</p></T>
  ```

  </Tab>
  <Tab value="Example 5">


  ```jsx
  <p>{`${temp}`}</p>
  ```

  Will be converted to:

  ```jsx
  <T id=""><p><Var>{`${temp}`}</Var></p></T>
  ```

  </Tab>
</Tabs>

The CLI will only wrap direct children inside JSX elements. It will wrap other JSX elements separately with their own `<T>` components.


<Callout type="warn">
    **Experimental**

    This feature is currently experimental and may not work perfectly.
    After running the scan, you should manually review the output and make sure it is correct.
    In particular, note that any non-static JSX Expressions `{...}` will be wrapped in `<Var>` components.
    You may need to manually review and edit these cases.
    Please report any issues you run into [here](https://github.com/General-Translation/gt-libraries/issues).
</Callout>

The CLI tool will also optionally wrap `<GTProvider>` components at the top level `layout.tsx` of your app, as well as
modify the `lang` attribute in the `<html>` tag to dynamically set the language of your app.

Lastly, it will optionally add the [`withGTConfig`](/docs/next/api/config/withGTConfig) plugin to your `next.config.js` file.

### Flags

<TypeTable
  type={{
    "--src": {
        description:
            'The source directory to scan',
        type: 'string',
        optional: true,
    },
  }}
/>