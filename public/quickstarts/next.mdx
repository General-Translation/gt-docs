import { Callout } from 'nextra/components'

# Next.js Quickstart 

This guide describes how to add `gt-react` to a [Next.js](https://nextjs.org) project which is using the [App Router](https://nextjs.org/docs#app-router-vs-pages-router).

### Set up your account

First, sign in to the General Translation [Dashboard](https://www.generaltranslation.com/dashboard) using an existing Google or GitHub account. 

Next, [create](https://www.generaltranslation.com/dashboard/redirect/api-keys) an API key. This is a 36-character string beginning `gtx-` which is used to authenticate your app with our cloud translation service.
Keep your API key safe and secret.

### Set up your local environment

Navigate to your existing Next.js app, or follow the instructions [here](https://nextjs.org/docs/getting-started/installation) to create a new one.

In your local environment, usually `.env.local`, set two environment variables:

```.env copy
GT_API_KEY=""
GT_PROJECT_ID=""
```

- For `GT_API_KEY`, use the API key you created earlier.
- For `GT_PROJECT_ID`, use the `projectID` found on the Dashboard.

![Code copy container entitled "projectID"](/screenshots/project_id.jpeg)

### Install the library

To install `gt-react`, open your project and run: 

```txt copy
npm i gt-react
```

### `i18n.js`

In the root directory of your project, or `src/` if you are using a `src` directory, create a file called `i18n.js`.

```
my-app/
├── src/
│   ├── app/
│   │    └── page.js
│   ├── components/
│   │   ├── Header.js
│   │   └── Footer.js
│   └── i18n.js
├── public/
│   └── favicon.ico
├── .gitignore
├── package.json
└── README.md
```

`i18n.js` is a central config file for `gt-react` components. **`getGT()` and other `gt-react` functions are exported from it**, not from the library directly. 

<Callout type="info">
    You can name the config file whatever you want and place it wherever you like. Calling it `i18n.js` is just a convention.
</Callout>

`i18n.js` should look like:

```js copy
import { initGT } from 'gt-react/next';

// initialize the library
export const { getGT, GTProvider } = initGT(); 
```

You can pass a config object to `initGT()` specifying 

## Dictionaries

Keeping translatable content in a single `.json` or `.js` file is a common technique in web app development.
Using a single dictionary allows for easier management of translations and ensures consistency across the application.

Uniquely, `gt-react` dictionaries don't just support strings. **You can write content in JSX too!**
This means you can usually copy and paste the content of your components directly into a `gt-react` dictionary.

A simple dictionary could look something like:

```js copy
// dictionary.js

const dictionary = {
    "landing": {
        "hero": <h1>Welcome to our site!</h1>,
        "get_started_button": (
            <a href='/signin'><button>Get Started</button></a>
        )
    },
    "client_component" {
        "greeting": <>Hello, world. This content is rendered in a client component.</>
    }
}

export default dictionary;
```

It would be imported into your `i18n.js` like this:

```js copy
import dictionary from './dictionary'
import { initGT } from 'gt-react/next';

export const { t, GTProvider } = initGT({
    defaultLocale: 'en-US'
    dictionary: dictionary
});
```

## `getGT()`

In the Next.js App Router, components are Server Components by default. 

`initGT()` creates a function called `getGT()`, which you can use in your components like a React [hook](https://react.dev/reference/react/hooks). However, unlike a hook, `getGT()` works in both client and server-rendered components.

```js copy
// i18n.js 

import { initGT } from 'gt-react/next';
import dictionary from './dictionary.js'
 
export const { getGT } = initGT({
    defaultLocale: 'en-US',
    dictionary: dictionary
});
```

```js copy
// page.js 
// this will work regardless of whether page is rendered on the client or the server

import { getGT } from '@i18n'

export default function Page() {
    const t = getGT()
    return (
        <main>
            {t('landing.hero')}
        </main>
    )
}
```

<Callout type="info">
`getGT()` is equivalent to the `useTranslations()` hook in other i18n libraries.
</Callout>

### `<GTProvider>`

Components which use client-side JavaScript, like React [hooks](https://react.dev/reference/react/hooks), are client components. 
Since all translation in the `gt-react` stack happens on the server, content must be translated before being passed to the client for translation to work.

Use `<GTProvider>` to pass translations from the server to the client.

```javascript copy
import { GTProvider } from '@i18n'
```

`<GTProvider>` provides a dictionary of translations to the client using React's [Context](https://react.dev/learn/passing-data-deeply-with-context) API.
As long as a client-side component has context provided by `<GTProvider>`, it can be accessed with `getGT()`.

```javascript copy
import { GTProvider } from '@i18n' // remember this can only be imported in server components

/*
Where dictionary is something like: 
{
    "prompt": <>Click me!<>,
    "hello": <p>Hello, world</p>,
    "goodbye": <p>Goodbye, world</p>
}
*/

import ClientComponent from './ClientComponent.js'

export default function Page() {
    return (
        <GTProvider>
            <ClientComponent />
        </GTProvider>
    )
}
```

```javascript copy
// ClientComponent.js
// Displays a button which changes the state every time it is pressed.
// If currentState is true, displays a greeting. Otherwise displays a goodbye.

'use client'

import { getGT } from '@i18n'
import { useState } from 'react'

export default function ClientComponent() {

    const t = getGT()

    const [currentState, setCurrentState] = useState(true)

    return (
        <div>
            <button onClick={() => {setCurrentState(prev => !prev)}}>
                {t('prompt')}
            </button>
            {t(currentState ? 'hello' : 'goodbye')}
        </div>
    )
}
```

### Using variables

Sometimes you need to include content that shouldn't be translated but could change in your content. For example, imagine you are displaying a welcome page and you want to address your user by their first name:

```js
export default function Page() {
    const firstname = "Alice" // or "Bob", "Charlie", etc.
    return (
        <main>
            Welcome to our site, {firstname}!
        </main>
    )
}
```

To translate a phrase involving a variable, use the [`<Var>`](/essentials#variables) component of `gt-react`:

```js copy
// dictionary.js
import { initVariables } from 'gt-react/next'

const { Var } = initVariables();

const dictionary = {
    "var_example": <>Welcome to our site, <Var name="firstname"/>!</>
}

export default dictionary;
```

```js copy
import { getGT } from '@i18n'

export default function Page() {

    const t = getGT();

    const firstname = "Alice" // or "Bob", "Charlie", etc.

    return (
        <main>
            {t('var_example', { firstname })}
        </main>
    )
}
```

The children of the `<Var>` component will remain untranslated and can change without forcing a retranslation.
Anything you include as the children of the `<Var>` in the dictionary will be the default value, rendered if no value is supplied in the `t()` function. 

<Callout>
    Use the `name` prop to specify the name of the variable, then assign a value to that name like `t('id', { "your_variable_name": your_value })`
</Callout>

Sometimes variables need to be localized in some way — for example, in US English (`en-US`) dates are written month first, with slashes: MM/DD/YY. In German (`de`) they are written day first, with periods: DD.MM.YY.
In addition to `<Var>`, there are the specialized variable types [`<Num>`](/essentials#num) for numbers, [`<DateTime>`](/essentials#datetime) for dates, and [`<Currency>`](/essentials#currency) for currencies, which handle these. 

```js copy
const { Var, Num, DateTime, Currency } = initVariables();
```

### Plurals

Imagine you wanted to translate a phrase that could be singular or plural, like:

```js
export default function Page() {
    const n = 2; // could be any number
    return (
        <main>
            {
                n === 1 
                ?
                <>You have one new message.
                :
                <>You have {n} new messages.</>
            }
        </main>
    )
}
```

You *could* create two translations, and use the `<Var>` component (or better yet, the `<Num>` component) to render the number without forcing a new translation for each different value of `n`.

But in some languages, there are more than just singulars and plurals. 
For example, many Arabic nouns have a dual form, a unique type of plural that is only used if there are exactly two of something.
`gt-react` handles this natively. All you have to do is include one of the following in your dictionary metadata: `singular`, `plural`, `dual`, `zero`, `one`, `two`, `few`, `many`, `other`.

```js
// dictionary.js

const { Num } = initVariables();

const dictionary = {
    "messages": [
        <>You have <Num/> new messages.</>, 
        { singular: <>You have one new message.</> }
    ]
}

export default dictionary;
```

Then, when you render your plural, pass a number `n`.
Depending on the value of `n` and your user's current locale, it selectively renders a singular or plural form.

```js copy
import { getGT } from '@i18n'

export default function Page() {
    const t = getGT();
    return (
        <main>
            {t('messages', { n: 2 })}
        </main>
    )
}
```

This will display a plural form in English, but an autogenerated dual form in Arabic.

Learn more about plurals [here](/essentials#plurals).

### Next steps

- Use the [AI reference sheet](/ai-guide) to ask your favorite AI model to set up the `gt-react` library.

- Read more about how to use [`t()`](/essentials).